ALTER PROCEDURE [dbo].[cy_GroupTopicSubscribers_SelectByTopic]

/*
Author:				Joe Audette
Created:			2004-10-13
Last Modified:		2010-03-20

*/

@GroupID int,
@TopicID		int,
@CurrentPostUserID 	int


AS

SELECT		u.Email


FROM			cy_Users u

WHERE
			u.UserID <> @CurrentPostUserID
			AND
			(
				(
					u.UserID IN (SELECT UserID FROM cy_GroupTopicSubscriptions
							WHERE TopicID = @TopicID
								AND UnSubscribeDate IS NULL)
				)
				OR
				(
					u.UserID IN (SELECT UserID FROM cy_GroupSubscriptions
							WHERE GroupID = @GroupID
								AND UnSubscribeDate IS NULL)
				)
			)



GO

