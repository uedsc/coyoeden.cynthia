
CREATE TABLE `cy_Groups` (
  `ItemID` int(11) NOT NULL auto_increment,
  `ModuleID` int(11) NOT NULL default '0',
  `CreatedDate` datetime NOT NULL default '0000-00-00 00:00:00',
  `CreatedBy` int(11) NOT NULL default '0',
  `Title` varchar(100) NOT NULL default '',
  `Description` text NOT NULL,
  `IsModerated` tinyint(1) unsigned NOT NULL default '0',
  `IsActive` tinyint(1) unsigned NOT NULL default '0',
  `SortOrder` int(11) NOT NULL default '100',
  `TopicCount` int(11) NOT NULL default '0',
  `PostCount` int(11) NOT NULL default '0',
  `MostRecentPostDate` datetime default NULL,
  `MostRecentPostUserID` int(11) NOT NULL default '0',
  `PostsPerPage` int(11) NOT NULL default '10',
  `TopicsPerPage` int(11) default '20',
  `AllowAnonymousPosts` tinyint(1) unsigned NOT NULL default '1',
  PRIMARY KEY  (`ItemID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `cy_GroupTopics` (
  `TopicID` int(11) NOT NULL auto_increment,
  `GroupID` int(11) NOT NULL default '0',
  `TopicTitle` varchar(255) NOT NULL default '',
  `TopicDate` datetime NOT NULL default '0000-00-00 00:00:00',
  `TotalViews` int(11) NOT NULL default '0',
  `TotalReplies` int(11) NOT NULL default '0',
  `SortOrder` int(11) NOT NULL default '1000',
  `IsLocked` tinyint(1) unsigned NOT NULL default '0',
  `GroupSequence` int(11) NOT NULL default '1',
  `MostRecentPostDate` datetime default NULL,
  `MostRecentPostUserID` int(11) default NULL,
  `StartedByUserID` int(11) NOT NULL default '0',
  PRIMARY KEY  (`TopicID`),
  KEY `FK_cy_GroupTopics_Group` (`GroupID`),
  CONSTRAINT `FK_cy_GroupTopics_Group` FOREIGN KEY (`GroupID`) REFERENCES `cy_Groups` (`ItemID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `cy_GroupPosts` (
  `PostID` int(11) NOT NULL auto_increment,
  `TopicID` int(11) NOT NULL default '0',
  `TopicSequence` int(11) NOT NULL default '1',
  `Subject` varchar(255) NOT NULL default '',
  `PostDate` datetime NOT NULL default '0000-00-00 00:00:00',
  `Approved` tinyint(1) unsigned NOT NULL default '1',
  `UserID` int(11) NOT NULL default '0',
  `SortOrder` int(11) NOT NULL default '100',
  `Post` text NOT NULL,
  PRIMARY KEY  (`PostID`),
  KEY `FK_cy_GroupPosts_Topic` (`TopicID`),
  CONSTRAINT `FK_cy_GroupPosts_Topic` FOREIGN KEY (`TopicID`) REFERENCES `cy_GroupTopics` (`TopicID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE `cy_GroupSubscriptions` (
  `SubscriptionID` int(11) NOT NULL auto_increment,
  `GroupID` int(11) NOT NULL default '0',
  `UserID` int(11) NOT NULL default '0',
  `SubscribeDate` datetime NOT NULL default '0000-00-00 00:00:00',
  `UnSubscribeDate` datetime default NULL,
  PRIMARY KEY  (`SubscriptionID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE `cy_GroupTopicSubscriptions` (
  `TopicSubscriptionID` int(11) NOT NULL auto_increment,
  `TopicID` int(11) NOT NULL default '0',
  `UserID` int(11) NOT NULL default '0',
  `SubscribeDate` datetime NOT NULL default '0000-00-00 00:00:00',
  `UnSubscribeDate` datetime default NULL,
  PRIMARY KEY  (`TopicSubscriptionID`),
  KEY `FK_cy_GroupTopicSubTopic` (`TopicID`),
  CONSTRAINT `FK_cy_GroupTopicSubTopic` FOREIGN KEY (`TopicID`) REFERENCES `cy_GroupTopics` (`TopicID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

